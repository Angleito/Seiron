<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seiron Build Test</title>
    <style>
        body {
            background: black;
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            text-align: center;
        }
        h1 {
            color: #facc15;
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        button {
            background: #facc15;
            color: black;
            border: none;
            padding: 12px 24px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            margin: 8px;
        }
        button:hover {
            background: #fbbf24;
        }
        #log {
            background: #1f2937;
            border: 1px solid #374151;
            padding: 16px;
            margin-top: 20px;
            border-radius: 8px;
            text-align: left;
            max-width: 600px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9rem;
        }
        .error { color: #ef4444; }
        .success { color: #10b981; }
        .info { color: #3b82f6; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üêâ Seiron Build Test v1.0</h1>
        <p>Testing if static files are deployed correctly</p>
        
        <div>
            <button onclick="testJavaScript()">Test JavaScript</button>
            <button onclick="testThreeJS()">Test Three.js Loading</button>
            <button onclick="testNetworkRequests()">Test Network</button>
            <button onclick="clearLog()">Clear Log</button>
        </div>
        
        <div id="log"></div>
    </div>

    <script>
        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            const entry = document.createElement('div');
            entry.className = type;
            entry.textContent = `[${time}] ${message}`;
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }

        function clearLog() {
            document.getElementById('log').innerHTML = '';
        }

        function testJavaScript() {
            log('Testing JavaScript execution...', 'info');
            try {
                const test = [1, 2, 3].map(x => x * 2);
                log(`‚úÖ JavaScript working: ${test.join(', ')}`, 'success');
                log(`‚úÖ ES6 features working (arrow functions, template literals)`, 'success');
            } catch (error) {
                log(`‚ùå JavaScript error: ${error.message}`, 'error');
            }
        }

        async function testThreeJS() {
            log('Testing Three.js loading...', 'info');
            try {
                // Try to load Three.js from CDN
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/three.js/r170/three.min.js';
                script.onload = () => {
                    log('‚úÖ Three.js loaded from CDN', 'success');
                    if (typeof THREE !== 'undefined') {
                        log('‚úÖ THREE global available', 'success');
                        
                        // Test basic Three.js functionality
                        try {
                            const scene = new THREE.Scene();
                            const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                            log('‚úÖ Basic Three.js objects created', 'success');
                            
                            // Test WebGL
                            const canvas = document.createElement('canvas');
                            const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                            if (gl) {
                                log('‚úÖ WebGL context available', 'success');
                            } else {
                                log('‚ùå WebGL not available', 'error');
                            }
                        } catch (threeError) {
                            log(`‚ùå Three.js execution error: ${threeError.message}`, 'error');
                        }
                    } else {
                        log('‚ùå THREE global not available after load', 'error');
                    }
                };
                script.onerror = () => {
                    log('‚ùå Failed to load Three.js from CDN', 'error');
                };
                document.head.appendChild(script);
            } catch (error) {
                log(`‚ùå Three.js test error: ${error.message}`, 'error');
            }
        }

        async function testNetworkRequests() {
            log('Testing network requests...', 'info');
            
            // Test if we can load the dragon model
            try {
                const response = await fetch('/models/dragon_head.obj');
                if (response.ok) {
                    const size = response.headers.get('content-length');
                    log(`‚úÖ Dragon model accessible (${size ? Math.round(size/1024) + 'KB' : 'unknown size'})`, 'success');
                } else {
                    log(`‚ùå Dragon model request failed: ${response.status} ${response.statusText}`, 'error');
                }
            } catch (error) {
                log(`‚ùå Dragon model fetch error: ${error.message}`, 'error');
            }

            // Test main.tsx
            try {
                const response = await fetch('/src/main.tsx');
                if (response.ok) {
                    log('‚úÖ main.tsx accessible', 'success');
                } else {
                    log(`‚ùå main.tsx not accessible: ${response.status}`, 'error');
                }
            } catch (error) {
                log(`‚ùå main.tsx fetch error: ${error.message}`, 'error');
            }
        }

        // Auto-run basic test on load
        window.onload = function() {
            log('üöÄ Page loaded, running initial tests...', 'info');
            testJavaScript();
        };
    </script>
</body>
</html>